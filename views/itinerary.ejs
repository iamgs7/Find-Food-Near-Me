<!DOCTYPE html>
<html lang="en">
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
        <title>Food Near Me</title>
        <!-- CSS  -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css" media="screen,projection"/>
        <link href="css/trip.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    </head>
    
    <body>
        <nav class="light-blue lighten-1" role="navigation">
            <div class="nav-wrapper container">
                <a id="logo-container" href="#" class="brand-logo">Food Near Me</a>
                <ul class="right hide-on-med-and-down">
                    <li>
                        <% if (user.local.email) { %>
                        Hi,<span id="userCurrent"><%= user.local.first_name %></span>
                        <% } %>
                    </li>
                    <li>
                        <a href="/logout" class="btn btn-default btn-sm">Logout</a>
                    </li>
                </ul>
                
                <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
            </div>
        </nav>
        <div class="section no-pad-bot" id="index-banner">
            <div class="container">
                <br><br>
                <h1 class="header center orange-text">Hangout planner.</h1>
                <div class="row center">
                    <h5 class="header col s12 light">Plan a hangout with your friends and family by selecting multiple restaurants and places!</h5>
                </div>
                <div class="row center">
                    <a id="makeTrip" class="btn-large waves-effect waves-blue orange"><i class="material-icons left">add_location</i>Make a plan!<i class="material-icons right">restaurant</i></a>
                    <input id="pac-input" class="controls" type="text"
                    placeholder="Enter a location">
                    <div id="map"></div>
                </div>
                <br><br>
            </div>
        </div>
        
    </body>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/knockout/knockout-3.3.0.js"></script>
    <script type="text/javascript">
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: {
                    lat: -33.8688,
                    lng: 151.2195
                },
                zoom: 13
            });
            var input = document.getElementById('pac-input');
            var autocomplete = new google.maps.places.Autocomplete(input);
            autocomplete.bindTo('bounds', map);
            map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);
            var infowindow = new google.maps.InfoWindow();
            var marker = new google.maps.Marker({
                map: map
            });
            marker.addListener('click', function() {
                infowindow.open(map, marker);
            });
            autocomplete.addListener('place_changed', function() {
                infowindow.close();
                var place = autocomplete.getPlace();
                console.log(((place.formatted_address).split(","))[0]);
                if (!place.geometry) {
                    return;
                }
                if (place.geometry.viewport) {
                    map.fitBounds(place.geometry.viewport);
                } else {
                    map.setCenter(place.geometry.location);
                    map.setZoom(17);
                }
                // Set the position of the marker using the place ID and location.
                marker.setPlace({
                    placeId: place.place_id,
                    location: place.geometry.location
                });
                marker.setVisible(true);
                infowindow.setContent('<div><strong>' + place.name + '</strong><br>' +
                    'Place ID: ' + place.place_id + '<br>' +
                    place.formatted_address);
                infowindow.open(map, marker);
            });
        }
    </script>
    <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDdce776HM7svZ-QLwZkmTaNtTm77w-Dfw&libraries=places&callback=initMap" async defer></script>
    <script src="js/trip.js"></script>
        
        
    </html>